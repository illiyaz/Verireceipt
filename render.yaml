services:
  - type: web
    name: verireceipt-api
    runtime: docker
    dockerfilePath: ./Dockerfile
    plan: pro
    region: oregon
    envVars:
      # Render sets PORT automatically; Dockerfile reads it
      - key: DATABASE_URL
        fromDatabase:
          name: verireceipt-db
          property: connectionString
      - key: VERIRECEIPT_STORE_BACKEND
        value: db
      - key: PYTHONUNBUFFERED
        value: "1"
      # Vision / LLM config â€” point to your E2E Networks GPU later
      - key: OLLAMA_URL
        value: http://localhost:11434
      - key: VISION_MODEL
        value: llama3.2-vision:latest
      - key: HYBRID_VISION
        value: "false"
      # OCR engine
      - key: OCR_ENGINE
        value: tesseract

databases:
  - name: verireceipt-db
    plan: starter
    databaseName: verireceipt
    postgresMajorVersion: "16"
